%%% Econ717: Applied Econometrics
%%% Spring 2022
%%% Danny Edgel
%%%
% Due on Canvas Friday, April 22nd, 11:00 AM
%%%

%%%
%							PREAMBLE
%%%

\documentclass{article}

%%% declare packages
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{array}
\usepackage{bm}
\usepackage{bbm}
\usepackage{changepage}
\usepackage{centernot}
\usepackage{color}
\usepackage{courier}
\usepackage{graphicx}
\usepackage{listings}
\usepackage[shortlabels]{enumitem}
\usepackage{boondox-cal}
\usepackage{fancyhdr}
	\fancyhf{} % sets both header and footer to nothing
	\renewcommand{\headrulewidth}{0pt}
    \rfoot{Edgel, \thepage}
    \pagestyle{fancy}
	
%%% define shortcuts for set notation
\newcommand{\N}{\mathcal{N}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\R}{\mathbb{R}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\union}{\bigcup}
\newcommand{\intersect}{\bigcap}
\newcommand{\lmt}{\underset{x\rightarrow\infty}{\text{lim }}}
\newcommand{\neglmt}{\underset{n\rightarrow-\infty}{\text{lim }}}
\newcommand{\zerolmt}{\underset{x\rightarrow 0}{\text{lim }}}
\newcommand{\usmax}{\underset{1\leq k \leq n}{\text{max }}}
\newcommand{\usmin}[1]{\underset{#1}{\text{min }}}
\newcommand{\intinf}{\int_{-\infty}^{\infty}}
\newcommand{\olx}[1]{\overline{X}_{#1}}
\newcommand{\oly}[1]{\overline{Y}_{#1}}
\newcommand{\olz}[1]{\overline{Z}_{#1}}
%\newcommand{\est}[1]{\frac{1}{#1}\sum_{i=1}^{#1}}
\newcommand{\est}[1]{\frac{1}{\lowercase{#1}}\sum_{i=1}^{\lowercase{#1}}}
\newcommand{\sumn}{\sum_{i=1}^{n}}
\newcommand{\loge}[1]{\text{log}\left(#1\right)}
\renewcommand{\tilde}[1]{\widetilde{#1}}
\newcommand{\tb}{\tilde{\beta}}
\renewcommand{\Pr}[1]{\text{Pr}\left(#1\right)}
\newcommand{\bols}{\hat{\beta}^{OLS}}
\newcommand{\bhat}{\hat{\beta}}
\newcommand{\ahat}{\hat{\alpha}}
\newcommand{\ehat}{\hat{\varepsilon}}
\newcommand{\vols}{\hat{\varepsilon}_{OLS}}
\newcommand{\one}[1]{\mathbbm{1}\left\{#1\right\}}
\newcommand{\tr}[1]{\text{tr}\left(#1\right)}
\newcommand{\pfrac}[2]{\left(\frac{#1}{#2}\right)}
\newcommand{\bcls}{\tilde{\beta}_{CLS}}
\renewcommand{\L}{\mathcal{L}}
\newcommand{\vt}{\tilde{\varepsilon}}
\renewcommand{\Pr}[1]{Pr\left(#1\right)}
\newcommand{\biv}{\bhat^{IV}}
\newcommand{\xbar}{\overline{X}}
\newcommand{\ybar}{\overline{Y}}
\newcommand{\zbar}{\overline{Z}}
\newcommand{\eps}{\varepsilon}
\newcommand{\esti}{\frac{1}{T_i-1}\sum_{t=1}^{T_i}}
\newcommand{\oinv}{\Omega^{-1}}
\newcommand{\olg}{\overline{g}_n}
\newcommand{\e}[1]{\text{exp}\left(#1\right)}
\DeclareRobustCommand{\bbone}{\text{\usefont{U}{bbold}{m}{n}1}}
\newcommand{\that}{\hat{\theta}_n}
\newcommand{\tshat}{\hat{\theta}^*_n}
\newcommand{\ttilde}{\tilde{\theta}_n}
\newcommand{\ghat}{\hat{\gamma}_n}
\newcommand{\gtilde}{\tilde{\gamma}_n}
\newcommand{\chat}{\hat{c}}
\newcommand{\Qhat}{\hat{Q}_n(\beta)}
\renewcommand{\lim}[1]{\underset{#1}{\text{lim }}}
\newcommand{\xs}{X^*}
\newcommand{\olxs}{\overline{X}^*}
\newcommand{\pinv}{\Phi^{-1}}
\newcommand{\tchat}{\that^\dagger}

\newcommand{\E}[1]{\mathbb{E}\left[#1\right]}% expected value
\newcommand{\Es}[1]{\mathbb{E}^*\left[#1\right]}% expected value
\renewcommand{\exp}[1]{\E\left[#1\right]}

\definecolor{mygreen}{RGB}{28,172,0} % color values Red, Green, Blue
\definecolor{mylilas}{RGB}{170,55,241}


%%% define column vector command (from Michael Nattinger)
\newcount\colveccount
\newcommand*\colvec[1]{
        \global\colveccount#1
        \begin{pmatrix}
        \colvecnext
}
\def\colvecnext#1{
        #1
        \global\advance\colveccount-1
        \ifnum\colveccount>0
                \\
                \expandafter\colvecnext
        \else
                \end{pmatrix}
        \fi
}
\newcount\rowveccount
\newcommand*\rowvec[1]{
        \global\rowveccount#1
        \begin{pmatrix}
        \rowvecnext
}
\def\rowvecnext#1{
        #1
        \global\advance\rowveccount-1
        \ifnum\rowveccount>0
                &
                \expandafter\rowvecnext
        \else
                \end{pmatrix}
        \fi
}

\makeatletter
\let\amsmath@bigm\bigm

\renewcommand{\bigm}[1]{%
  \ifcsname fenced@\string#1\endcsname
    \expandafter\@firstoftwo
  \else
    \expandafter\@secondoftwo
  \fi
  {\expandafter\amsmath@bigm\csname fenced@\string#1\endcsname}%
  {\amsmath@bigm#1}%
}


%________________________________________________________________%

\begin{document}

\title{	Problem Set \#1 }
\author{ 	Danny Edgel 			\\ 
		    Econ 717: Applied Econometrics	\\
		    Spring 2022						
		}
\maketitle\thispagestyle{empty}

%%%________________________________________________________________%%%

\noindent The attached file, edgel\_ps1b.zip, includes the two Julia files that conduct all of the required analysis for this problem set.

\begin{enumerate}[a)]
        \item Normalizing at least one of the latent prices, $\pi_j$ in this model is not only appropriate but necessary, because we cannot separately identify each latent price if we only observe wages and occupational choices. To see this, consider some agent $i$ who chooses occupation 1, and isolate their occupation 1 shock:
        \begin{align*}
                W_1 &> W_2 \\
                \pi_1(\mu_1 + \varepsilon_1) &> \pi_2(\mu_2 + \varepsilon_2) \\
                \mu_1 + \varepsilon_1 &> \frac{\pi_2}{\pi_1}(\mu_2 + \varepsilon_2)
        \end{align*}
        Thus, we can at best identify the ratio of latent prices across the two occupations. Further, normalizing the latent prices to be equivalent is without loss of generality because there is not a unique $(\mu_1,\mu_2, \frac{\pi_2}{\pi_1})$ that satisfies the above inequality.\footnote{This is because, for any given $(\mu_1,\mu_2)$, any occupational choice can be rationalized by setting the latent price ratio either at zero or near infinity, since we do not observe the wage of the occupation that is not chosen.} However, holding the latent prices constant, we can still identify a unique set of average skills that rationalize occupation choice.

        \item See the SimulateData() function in ps1b\_functions.jl for the code that generates the data for a given $\theta$.
        
        \item By performing a one-by-one grid search over each parameter in $(\mu_1, \mu_2, \sigma_1, \sigma_2, \rho)$, I found that \input{c.tex}
        
        \item A consistent estimator for the parameters of $\theta$ is the simulated method of moments estimator:
        \[
                \hat{\theta} = \text{arg}\usmin{\theta}\left[g(\theta) - \hat{g}\right]'W\left[g(\theta) - \hat{g}\right]
        \]
        Where $g(\theta)$ is a vector of simulated moments and $\hat{g}$ is a vector of the same moments, but from the ``data''. The first moment is the share of workers choosing occupation 1, and the remaining moments (with the number of moments depending on the number of parameters we allow to vary) are the means and higher-order central moments of wages for workers in each occupation. $W$ is any positive semi-definite weight matrix. For this problem set, we will simply use the identity matrix.

        Since this is a monte carlo and we know that $g(\theta)$ is being calculated from a correctly-specified distribution, $\hat{\theta}$ is a consistent estimator of $\theta$ so long as we use at least as many moments in $g(\theta)$ as there are free parameters in $\theta$.

        \item Holding all but $\mu_1$ and $\rho$ fixed, I performed a box minimization of SMMObjFun() (see ps1b\_functions.jl) to obtain \input{e.tex}
        
        \item The identification plots for $\hat{\theta}$ are below.As you can see, the objective function (Holding the other free parameter constant at its true value) has a unique minimum almost exactly where the true parameter lies.
        \begin{center}
                \includegraphics[width=0.45\textwidth]{f1.png}
                \includegraphics[width=0.45\textwidth]{f2.png}
        \end{center}

        \item The table below question h) displays the first five moments\textemdash the share of workers choosing occupation 1, and the mean and variance of wages for each occupation\textemdash in both the ``data'' (column 1) and the model, using the estimated parameters (column 2).

        \item A minimum wage in occupation 1 is written into the SimulateData() function with a default value of negative infinity. Using this option and the occupational choice objective function that was used to find $\theta$ such that 60\% of agents chose occupation 1, I found that a minimum wage of \input{h.tex}
        \begin{center} 
                \input{table1.tex} 
        \end{center} 
\end{enumerate}

\end{document}